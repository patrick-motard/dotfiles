# Global Claude Code Instructions

These instructions apply to all projects where project-specific CLAUDE.md doesn't override them.

## General Preferences

- Never use emojis in commit messages, nor co-authoring from Claude, nor mentions of it being generated by Claude
- Never use em-dashes (â€”). Use regular dashes (-) or rewrite the sentence instead
- Prefer editing existing files over creating new ones when possible
- Use clear, concise commit messages focused on "why" rather than "what"

## Personal Repositories

- Scripts repo: `~/code/scripts` (GitHub)

## Beads (Issue Tracking)

Beads issues are tracked in these repos only:
- `~/code/zendesk/wiki-zendesk` - Zendesk work issues
- `~/code/wiki` - Personal wiki issues

Do not initialize or look for `.beads/` in other repositories.

## Script Creation Conventions

When creating scripts in the scripts repo:
- Use `#!/usr/bin/env zsh` shebang (prefer zsh over bash)
- Include a `usage` variable with NAME, SYNOPSIS, DESCRIPTION, ARGUMENTS, and EXAMPLES sections
- Use `while/case` pattern for argument parsing
- Make scripts executable after creation
- Match the style of existing scripts like `new_script` or `compress-video`

## Code Style

- Follow the existing code style in each project
- Prioritize readability and maintainability
- always update the links in the readme toc when adding/removing files in docs/

## NEVER EVER DO

These rules are ABSOLUTE:

### NEVER Publish Sensitive Data
- NEVER publish passwords, API keys, tokens to git/npm/docker
- Before ANY commit: verify no secrets included

### NEVER Commit .env Files
- NEVER commit `.env` to git
- ALWAYS verify `.env` is in `.gitignore`

## Claude Code Operating Principles

### 1. Plan Mode Default

- Enter plan mode for ANY non-trivial task (3+ steps or architectural decisions)
- If something goes sideways, STOP and re-plan immediately - don't keep pushing
- Use plan mode for verification steps, not just building
- Write detailed specs upfront to reduce ambiguity

### 2. Subagent Strategy

- Use subagents liberally to keep main context window clean
- Offload research, exploration, and parallel analysis to subagents
- For complex problems, throw more compute at it via subagents
- One task per subagent for focused execution

### 3. Self-Improvement Loop

- After ANY correction from the user: update tasks/lessons.md with the pattern
- Write rules for yourself that prevent the same mistake
- Ruthlessly iterate on these lessons until mistake rate drops
- Review lessons at session start for relevant project

### 4. Verification Before Done

- Never mark a task complete without proving it works
- Diff behavior between main and your changes when relevant
- Ask yourself: "Would a staff engineer approve this?"
- Run tests, check logs, demonstrate correctness

### 5. Demand Elegance (Balanced)

- For non-trivial changes: pause and ask "is there a more elegant way?"
- If a fix feels hacky: "Knowing everything I know now, implement the elegant solution"
- Skip this for simple, obvious fixes - don't over-engineer
- Challenge your own work before presenting it

### 6. Autonomous Bug Fixing

- When given a bug report: just fix it. Don't ask for hand-holding
- Point at logs, errors, failing tests - then resolve them
- Zero context switching required from the user
- Go fix failing CI tests without being told how